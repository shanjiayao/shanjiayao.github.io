# 多传感器融合感知之用于建图定位的多传感器分析



本文是深蓝学院多传感器融合感知课程的笔记，主要对用于建图定位的传感器进行原理梳理以及功能分析。

<!--more-->

## GNSS简介

### GNSS的概念

GNSS，Global Navigation Satellite System，是所有导航定位卫星的总称，凡是可以通过捕获跟踪其卫星信号实现定位的系统，均可以算在GNSS系统的范围中。GNSS广泛应用于手机导航、车载导航、测绘、农业、航空以及最近兴起的无人驾驶领域。

### GNSS的主要构成

GNSS的构成可以分为三部分，分别是**全球卫星导航系统**，**区域导航系统**，以及**增强系统**。

全球卫星导航系统，比如美国的GPS，欧洲的GALILEO(伽利略)，俄罗斯的GLONASS(格洛纳斯)以及我国的BDS(北斗)。这些系统均位于同一层级，都属于GNSS，并且可以覆盖地球的所有地区。

全球卫星导航系统一般是中美俄以及欧盟等用作全球战略储备而追求的，还有一些只在局部范围内提供的区域导航系统，比如我国的北斗一代和二代，其覆盖的面积就达不到全球的级别，只能算在区域性的导航系统。还有日本的准天顶系统(QZSS)，印度的IRNSS系统等。

除了以上两种，还有增强系统，顾名思义就是对前面的辅助以及增强，这里就涉及到具体需求具体强化了，相关的包括美国的WAAS。日本的MSAS，欧盟的EGNOS, 印度的GAGAN等。

综上，GNSS可以根据其覆盖范围以及功能侧重分为以上三种。

全球导航卫星系统 | 区域导航系统 | 增强系统
:--:            | :--:         | :--: 
GPS             | QZSS         | WAAS
GALILEO         | IRNSS        | MSAS
GLONASS         | --           | EGNOS
BDS             | --           | GAGAN

### GNSS的主要功能

GNSS的主要功能有三：定位、测速以及授时。

**定位**功能就是通过接收机，接收卫星的信息，我们可以对接收到的信号计算相位差，进而得到传播时间，乘以光速即为二倍的测量距离。如果我们同时接受**三颗**卫星的信号，那么以卫星为中心，距离微半径，就可以确定当前接收机所在的经纬度以及高度信息。但是由于我们做不到让接收设备的时间与卫星的时间完全一致没有误差，所以需要多用一颗卫星，来计算接收设备时间与卫星时间的误差，如果同时接收到四颗卫星的信号，那么就可以对原本模糊的时间观测进行精确求解，从而得到时间精准的位置信息。一般来讲，GNSS的定位误差在米级别，如果遇到高反射场景，比如[*城市峡谷*](https://zh.wikipedia.org/wiki/%E9%83%BD%E5%B8%82%E5%B3%BD%E8%B0%B7)，那么误差会由于信号的随机反射而加大，甚至会达到百米级别。

**测速**则是测量位置差以及朝向角。**授时**则用来做时间同步，GNSS可以实现高精度授时，达到纳秒量级。

### GNSS的误差分析

以自动驾驶为例，如果无人车上面搭载了GNSS的接收机，通过实时接收GNSS信息来获取自身的绝对位置。那么此时GNSS定位的误差可能来自于以下方面：

- **信号的传输损失**
	- 由于信号在传输过程中，发生了折射，导致信息损失。主要发生在电离层以及对流层
- **时钟的不对齐**
	- 如果发射或者接收的时钟不一致，那么对于飞行时间的计算就会有偏差，导致测量误差变大，比如卫星时钟、接收机时钟
- **多路径与非视距**
	- 通常来说，我们将[无线通信系统](https://www.zhihu.com/search?q=%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22398888467%22%7D)的传播条件分成视距(LOS)和非视距(NLOS)两种环境，在视距条件下，无线信号无遮挡地在发送端与接收端之间进行直线传播，这要求在第一菲涅尔区内不存在对无线电波造成遮挡的物体，如果不满足这一条件，信号强度就会产生明显下降，而这种利用以视距传播的无线电波进行信息传输的通信就是视距通信。
	- 由于周围建筑物对卫星信号的反射与遮挡，导致了多路径效应和非视距信号，其中现有的多路径信号大部分可以通过好一点的接收机检测出来，或者其误差可以得到一定程度的抑制。然而非视距信号（也叫NLOS）就非常的危险，其非视距信号的观测量误差可以达到100米的级别，而且非视距信号基于传统的接收机技术很难完全检测出来。

为了解决以上误差，通用的做法是使用**RTK**(*real - time kinematic*)技术，高精度的gps测量必须采用载波相位观测值，rtk定位技术就是基于载波相位观测值的实时动态定位技术，它能够实时地提供测站点在指定坐标系中的三维定位结果，并达到**厘米级精度**。在rtk作业模式下，基准站通过数据链将其观测值和测站坐标信息一起传送给流动站。流动站不仅通过数据链接收来自基准站的数据，还要采集gps观测数据，并在系统内组成差分观测值进行实时处理，同时给出厘米级定位结果，历时不到一秒钟。

更详细的解决方案可以参考： https://zhuanlan.zhihu.com/p/416072448

## GNSS相关的多传感器融合

虽然上述RTK的技术可以使定位达到厘米级别，但是对于自动驾驶而言，不是所有场景都有可用的RTK信号的，所以针对建图定位问题，我们还是需要使用多传感器融合的方法来使自动驾驶技术更加的鲁棒。

对于建图定位任务来说，涉及到的传感器有四种，GNSS+IMU、Lidar、Camera以及轮速计。通常我们会用GNSS(RTK)来获取全局位置，再加上vslam以及lidar slam辅助定位，克服在GNSS信号不好时定位信息丢失的问题。

如果以上方案再考虑上5G以及V2X车路协同，那么整体的方法框架如下：

![](https://pictures-1309138036.cos.ap-nanjing.myqcloud.com/img/20220322163358.png)

## 总结

定位系统的目标就是通过以上传感器的融合，打造全工况、全时段、高精度、高可靠性的定位能力，所以多传感器之间的融合是必不可少的。

